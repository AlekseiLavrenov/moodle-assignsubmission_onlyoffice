/**
 * @module assignsubmission_onlyoffice/editor
 * @copyright  2023 Ascensio System SIA <integration@onlyoffice.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 **/
define("assignsubmission_onlyoffice/editor",["jquery"],(function($){var docEditor=null,openEditor=function(contextid,itemid,readonly){let tmplkey=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if("undefined"!=typeof DocsAPI){var params={action:"config",contextid:contextid,itemid:itemid};readonly&&(params.readonly=readonly),tmplkey&&(params.tmplkey=tmplkey);var ajaxUrl=M.cfg.wwwroot+"/mod/assign/submission/onlyoffice/api/editor.php";$.getJSON(ajaxUrl,params).done((function(config){docEditor=new DocsAPI.DocEditor("onlyoffice-editor",config),$("div#topofscroll").length>0&&$("div#topofscroll").addClass("assignsubmission-onlyoffice-display")}))}};return{init:function(documentserverurl,contextid,itemid,readonly,tmplkey){var docsapijs=document.createElement("script");docsapijs.type="text/javascript",$(docsapijs).appendTo("#app"),$(docsapijs).on("load",(function(){if(tmplkey){let formatelement=$("input#id_assignsubmission_onlyoffice_format"),selectformat=$("select#id_assignsubmission_onlyoffice_format"),enableapptoggle=$("input#id_assignsubmission_onlyoffice_enabled");if(0==enableapptoggle.length)return;enableapptoggle[0].checked&&formatelement.length>0&&"docxf"==formatelement[0].value&&openEditor(contextid,itemid,readonly,tmplkey),enableapptoggle.change((function(e){if(e.currentTarget.checked&&(formatelement.length>0&&"docxf"==formatelement[0].value||selectformat.length>0&&"docxf"==selectformat[0].value))return null===docEditor&&openEditor(contextid,itemid,readonly,tmplkey),void $("#app").show();$("#app").hide()})),selectformat.length>0&&selectformat.change((function(e){"docxf"==e.target.value?(null===docEditor&&openEditor(contextid,itemid,readonly,tmplkey),$("#app").show()):$("#app").is(":visible")&&$("#app").hide()}))}else openEditor(contextid,itemid,readonly)})),docsapijs.src=documentserverurl+"/web-apps/apps/api/documents/api.js"}}}));

//# sourceMappingURL=editor.min.js.map